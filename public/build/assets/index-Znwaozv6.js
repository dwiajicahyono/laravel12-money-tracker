import{r as m,a as h,j as e,H as B,t as n}from"./app-6bBVh81h.js";import{A as F}from"./app-layout-UsWctk4Z.js";import{d as A}from"./index-D329iiHL.js";import{B as s}from"./button-BkVP_mrO.js";import{D as u,a as x,b as p,c as g,d as j,e as b}from"./dialog-DV3fwRoB.js";import{I as k}from"./input-BKa16iTx.js";import{L as v}from"./label-hoL9B20y.js";import{P as I}from"./plus-kaWgOL_K.js";import{P as H}from"./pencil-CpJ14bZc.js";import{T as P}from"./trash-2-B8U6d4l0.js";/* empty css            */import"./index-CbZt69Ef.js";import"./index-CLF09JFy.js";import"./index-Bbf2PDuR.js";import"./index-CMWG4mbA.js";import"./index-Bqs3Wh3Q.js";import"./app-logo-icon-CbAe46uy.js";const M=[{title:"Dashboard",href:A().url},{title:"Kategori",href:"/categories"}];function se({categories:f}){const[N,l]=m.useState(!1),[y,o]=m.useState(!1),[C,d]=m.useState(!1),[i,c]=m.useState(null),t=h({name:""}),r=h({name:""}),D=h({}),K=async a=>{a.preventDefault();try{if(!(await fetch("/categories",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:t.data.name})})).ok)throw new Error("Failed to create category");l(!1),t.reset(),n.success("Kategori berhasil ditambahkan!"),window.location.reload()}catch{n.error("Gagal menambahkan kategori")}},S=a=>{c(a),r.setData("name",a.name),o(!0)},O=a=>{a.preventDefault(),i&&r.put(`/categories/${i.id}`,{onSuccess:()=>{o(!1),c(null),r.reset(),n.success("Kategori berhasil diupdate!")},onError:()=>{n.error("Gagal mengupdate kategori")}})},w=a=>{c(a),d(!0)},E=()=>{i&&D.delete(`/categories/${i.id}`,{onSuccess:()=>{d(!1),c(null),n.success("Kategori berhasil dihapus!")},onError:()=>{n.error("Gagal menghapus kategori")}})};return e.jsxs(F,{breadcrumbs:M,children:[e.jsx(B,{title:"Kategori"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Kategori"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Kelola kategori untuk mengorganisir transaksi Anda"})]}),e.jsxs(s,{onClick:()=>l(!0),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Tambah Kategori"]})]}),e.jsx("div",{className:"overflow-hidden rounded-xl border border-sidebar-border/70 bg-white dark:border-sidebar-border dark:bg-neutral-900",children:f.length===0?e.jsx("div",{className:"p-12 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Belum ada kategori. Klik tombol di atas untuk menambahkan."})}):e.jsx("div",{className:"divide-y divide-sidebar-border/70 dark:divide-sidebar-border",children:f.map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-neutral-50 dark:hover:bg-neutral-800/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex items-center rounded-full bg-blue-100 px-3 py-1.5 text-sm font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-200",children:a.name}),a.transaksis_count>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.transaksis_count," transaksi"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>S(a),children:e.jsx(H,{className:"h-4 w-4"})}),a.transaksis_count===0&&e.jsx(s,{variant:"ghost",size:"sm",onClick:()=>w(a),children:e.jsx(P,{className:"h-4 w-4 text-destructive"})})]})]},a.id))})})]}),e.jsx(u,{open:N,onOpenChange:l,children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Tambah Kategori Baru"}),e.jsx(j,{children:"Buat kategori baru untuk mengorganisir transaksi Anda"})]}),e.jsxs("form",{onSubmit:K,children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"category-name",children:"Nama Kategori"}),e.jsx(k,{id:"category-name",value:t.data.name,onChange:a=>t.setData("name",a.target.value),placeholder:"Misal: Makanan, Transport, Belanja",required:!0}),t.errors.name&&e.jsx("p",{className:"text-sm text-red-600",children:t.errors.name})]})}),e.jsxs(b,{children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Batal"}),e.jsx(s,{type:"submit",disabled:t.processing,children:"Simpan"})]})]})]})}),e.jsx(u,{open:y,onOpenChange:o,children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Edit Kategori"}),e.jsx(j,{children:"Ubah nama kategori"})]}),e.jsxs("form",{onSubmit:O,children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(v,{htmlFor:"edit-category-name",children:"Nama Kategori"}),e.jsx(k,{id:"edit-category-name",value:r.data.name,onChange:a=>r.setData("name",a.target.value),placeholder:"Misal: Makanan, Transport, Belanja",required:!0}),r.errors.name&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.name})]})}),e.jsxs(b,{children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Batal"}),e.jsx(s,{type:"submit",disabled:r.processing,children:"Update"})]})]})]})}),e.jsx(u,{open:C,onOpenChange:d,children:e.jsxs(x,{children:[e.jsxs(p,{children:[e.jsx(g,{children:"Hapus Kategori"}),e.jsxs(j,{children:['Apakah Anda yakin ingin menghapus kategori "',i?.name,'"? Transaksi yang menggunakan kategori ini tidak akan terhapus.']})]}),e.jsxs(b,{children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>d(!1),children:"Batal"}),e.jsx(s,{type:"button",variant:"destructive",onClick:E,children:"Hapus"})]})]})})]})}export{se as default};
