import{r as g,a as _,j as e,H as J,t as d}from"./app-B4oI9cTs.js";import{A as M,t as x}from"./app-layout-CXDj5jiT.js";import{B as n}from"./app-logo-icon-D8RKwkOG.js";import{d as U}from"./index-4Ns3tNZl.js";import{D as k,a as b,b as f,c as N,d as v,e as y}from"./dialog-B7Eh7TV6.js";import{I as c}from"./input-WlG94Que.js";import{L as i}from"./label-BZqGl-le.js";import{S,a as F,b as I,c as O,d as j}from"./select-61DKf0lV.js";import{P as R}from"./plus-kiRHevmI.js";import{P as $,T as K}from"./trash-2-xu-pbq5r.js";/* empty css            */import"./index-DW63AqxY.js";import"./index-Be3ddQ7L.js";import"./index-Kej3HBa3.js";import"./check-BMXRzIEY.js";const Q=[{title:"Dashboard",href:U().url},{title:"Transaksi",href:x.index().url}];function xe({transaksis:s}){const[E,m]=g.useState(!1),[P,u]=g.useState(!1),[q,h]=g.useState(!1),[o,p]=g.useState(null),D=()=>new Date().toISOString().split("T")[0],t=_({nama_transaksi:"",nominal:"",tanggal:D(),jenis:"pengeluaran"}),r=_({nama_transaksi:"",nominal:"",tanggal:"",jenis:"pemasukan"}),B=()=>{t.setData({nama_transaksi:"",nominal:"",tanggal:D(),jenis:"pengeluaran"}),m(!0)},V=a=>{a.preventDefault(),t.post(x.store().url,{onSuccess:()=>{m(!1),t.reset(),d.success("Transaksi berhasil ditambahkan!")},onError:()=>{d.error("Gagal menambahkan transaksi")}})},A=a=>{p(a),r.setData({nama_transaksi:a.nama_transaksi,nominal:a.nominal,tanggal:a.tanggal,jenis:a.jenis}),u(!0)},H=a=>{a.preventDefault(),o&&r.put(x.update(o.id).url,{onSuccess:()=>{u(!1),r.reset(),p(null),d.success("Transaksi berhasil diupdate!")},onError:()=>{d.error("Gagal mengupdate transaksi")}})},L=a=>{p(a),h(!0)},z=()=>{o&&r.delete(x.destroy(o.id).url,{onSuccess:()=>{h(!1),p(null),d.success("Transaksi berhasil dihapus!")},onError:()=>{d.error("Gagal menghapus transaksi")}})},G=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0,maximumFractionDigits:0}).format(parseFloat(a)),w=a=>{if(!a)return"";const l=parseFloat(a.toString());return isNaN(l)?"":Math.floor(l).toString().replace(/\B(?=(\d{3})+(?!\d))/g,".")},C=(a,l)=>{const T=a.replace(/\./g,"");l.setData({...l.data,nominal:T})};return e.jsxs(M,{breadcrumbs:Q,children:[e.jsx(J,{title:"Transaksi"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Daftar Transaksi"}),e.jsxs(n,{onClick:B,children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Tambah Transaksi"]})]}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-sidebar-border/70 bg-white dark:border-sidebar-border dark:bg-neutral-900",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-sidebar-border/70 bg-neutral-50 dark:border-sidebar-border dark:bg-neutral-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"No"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Nama Transaksi"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Nominal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Tanggal"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Jenis"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-sidebar-border/70 dark:divide-sidebar-border",children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-neutral-500",children:"Belum ada transaksi"})}):s.data.map((a,l)=>e.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-800/50",children:[e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:(s.current_page-1)*s.per_page+l+1}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:a.nama_transaksi}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:G(a.nominal)}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:new Date(a.tanggal).toLocaleDateString("id-ID")}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsx("span",{className:`inline-flex rounded-full px-2 py-1 text-xs font-semibold ${a.jenis==="pemasukan"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:a.jenis})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>A(a),children:e.jsx($,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>L(a),className:"text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-400 dark:hover:bg-red-900/20",children:e.jsx(K,{className:"h-4 w-4"})})]})})]},a.id))})]})}),s.last_page>1&&e.jsx("div",{className:"border-t border-sidebar-border/70 px-6 py-4 dark:border-sidebar-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-neutral-500",children:["Menampilkan"," ",(s.current_page-1)*s.per_page+1," ","-"," ",Math.min(s.current_page*s.per_page,s.total)," ","dari ",s.total," transaksi"]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:s.last_page},(a,l)=>l+1).map(a=>e.jsx("a",{href:x.index({query:{page:a}}).url,children:e.jsx(n,{variant:a===s.current_page?"default":"outline",size:"sm",children:a})},a))})]})})]})]}),e.jsx(k,{open:E,onOpenChange:m,children:e.jsxs(b,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Tambah Transaksi"}),e.jsx(v,{children:"Isi form di bawah untuk menambahkan transaksi baru"})]}),e.jsxs("form",{onSubmit:V,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-nama",children:"Nama Transaksi"}),e.jsx(c,{id:"create-nama",value:t.data.nama_transaksi,onChange:a=>t.setData("nama_transaksi",a.target.value),required:!0}),t.errors.nama_transaksi&&e.jsx("p",{className:"text-sm text-red-600",children:t.errors.nama_transaksi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-nominal",children:"Nominal"}),e.jsx(c,{id:"create-nominal",type:"text",value:w(t.data.nominal),onChange:a=>C(a.target.value,t),placeholder:"0",required:!0}),t.errors.nominal&&e.jsx("p",{className:"text-sm text-red-600",children:t.errors.nominal})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-tanggal",children:"Tanggal"}),e.jsx(c,{id:"create-tanggal",type:"date",value:t.data.tanggal,onChange:a=>t.setData("tanggal",a.target.value),required:!0}),t.errors.tanggal&&e.jsx("p",{className:"text-sm text-red-600",children:t.errors.tanggal})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"create-jenis",children:"Jenis"}),e.jsxs(S,{value:t.data.jenis,onValueChange:a=>t.setData("jenis",a),children:[e.jsx(F,{id:"create-jenis",children:e.jsx(I,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"pemasukan",children:"Pemasukan"}),e.jsx(j,{value:"pengeluaran",children:"Pengeluaran"})]})]}),t.errors.jenis&&e.jsx("p",{className:"text-sm text-red-600",children:t.errors.jenis})]})]}),e.jsxs(y,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>m(!1),children:"Batal"}),e.jsx(n,{type:"submit",disabled:t.processing,children:"Simpan"})]})]})]})}),e.jsx(k,{open:P,onOpenChange:u,children:e.jsxs(b,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Edit Transaksi"}),e.jsx(v,{children:"Ubah data transaksi di bawah"})]}),e.jsxs("form",{onSubmit:H,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-nama",children:"Nama Transaksi"}),e.jsx(c,{id:"edit-nama",value:r.data.nama_transaksi,onChange:a=>r.setData("nama_transaksi",a.target.value),required:!0}),r.errors.nama_transaksi&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.nama_transaksi})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-nominal",children:"Nominal"}),e.jsx(c,{id:"edit-nominal",type:"text",value:w(r.data.nominal),onChange:a=>C(a.target.value,r),placeholder:"0",required:!0}),r.errors.nominal&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.nominal})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-tanggal",children:"Tanggal"}),e.jsx(c,{id:"edit-tanggal",type:"date",value:r.data.tanggal,onChange:a=>r.setData("tanggal",a.target.value),required:!0}),r.errors.tanggal&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.tanggal})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(i,{htmlFor:"edit-jenis",children:"Jenis"}),e.jsxs(S,{value:r.data.jenis,onValueChange:a=>r.setData("jenis",a),children:[e.jsx(F,{id:"edit-jenis",children:e.jsx(I,{})}),e.jsxs(O,{children:[e.jsx(j,{value:"pemasukan",children:"Pemasukan"}),e.jsx(j,{value:"pengeluaran",children:"Pengeluaran"})]})]}),r.errors.jenis&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.jenis})]})]}),e.jsxs(y,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Batal"}),e.jsx(n,{type:"submit",disabled:r.processing,children:"Update"})]})]})]})}),e.jsx(k,{open:q,onOpenChange:h,children:e.jsxs(b,{children:[e.jsxs(f,{children:[e.jsx(N,{children:"Hapus Transaksi"}),e.jsxs(v,{children:['Apakah Anda yakin ingin menghapus transaksi "',o?.nama_transaksi,'"? Tindakan ini tidak dapat dibatalkan.']})]}),e.jsxs(y,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Batal"}),e.jsx(n,{type:"button",variant:"destructive",onClick:z,disabled:r.processing,children:"Hapus"})]})]})})]})}export{xe as default};
