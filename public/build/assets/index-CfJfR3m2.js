import{u as B,r as h,a as N,j as e,H as T,t as l}from"./app-Doj020Wi.js";import{A as I,a as m}from"./app-layout-BHtDkPO_.js";import{B as n}from"./app-logo-icon-OXfJ8hrv.js";import{d as H}from"./index-4Ns3tNZl.js";import{D as u,a as j,b,c as f,d as w,e as v}from"./dialog-Bf_zC0gr.js";import{I as i}from"./input-DPHIQ1kM.js";import{L as d}from"./label-D9cDJMdA.js";import{P as M}from"./plus-DXgVM16L.js";import{P as K,T as L}from"./trash-2-RhMjpIRW.js";/* empty css            */import"./index-3YOInBl4.js";import"./index-CwHqhYix.js";const z=[{title:"Dashboard",href:H().url},{title:"Anggota",href:m.index().url}];function ee({users:t}){const{auth:g}=B().props,[y,p]=h.useState(!1),[D,x]=h.useState(!1),[C,c]=h.useState(!1),[o,k]=h.useState(null),r=N({name:"",email:"",password:"",password_confirmation:""}),s=N({name:"",email:"",password:"",password_confirmation:""}),_=()=>{r.setData({name:"",email:"",password:"",password_confirmation:""}),r.clearErrors(),p(!0)},A=a=>{a.preventDefault(),r.post(m.store().url,{onSuccess:()=>{p(!1),l.success("Anggota berhasil ditambahkan")},onError:()=>{l.error("Gagal menambahkan anggota")}})},E=a=>{k(a),s.setData({name:a.name,email:a.email,password:"",password_confirmation:""}),s.clearErrors(),x(!0)},S=a=>{a.preventDefault(),o&&s.put(m.update({anggotum:o.id}).url,{onSuccess:()=>{x(!1),l.success("Anggota berhasil diperbarui")},onError:()=>{l.error("Gagal memperbarui anggota")}})},F=a=>{k(a),c(!0)},O=()=>{if(o){if(o.id===g.user.id){l.error("Tidak dapat menghapus akun sendiri"),c(!1);return}s.delete(m.destroy({anggotum:o.id}).url,{onSuccess:()=>{c(!1),l.success("Anggota berhasil dihapus")},onError:()=>{l.error("Gagal menghapus anggota")}})}};return e.jsxs(I,{breadcrumbs:z,children:[e.jsx(T,{title:"Anggota"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Anggota"}),e.jsxs(n,{onClick:_,children:[e.jsx(M,{className:"mr-2 h-4 w-4"}),"Tambah Anggota"]})]}),e.jsxs("div",{className:"overflow-hidden rounded-xl border border-sidebar-border/70 bg-white dark:border-sidebar-border dark:bg-neutral-900",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b border-sidebar-border/70 bg-neutral-50 dark:border-sidebar-border dark:bg-neutral-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Nama"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Tanggal Bergabung"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-neutral-500 dark:text-neutral-400",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-sidebar-border/70 dark:divide-sidebar-border",children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-8 text-center text-neutral-500",children:"Belum ada anggota"})}):t.data.map(a=>e.jsxs("tr",{className:"hover:bg-neutral-50 dark:hover:bg-neutral-800/50",children:[e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-neutral-900 dark:text-neutral-100",children:[a.name,a.id===g.user.id&&e.jsx("span",{className:"ml-2 inline-flex rounded-full bg-blue-100 px-2 py-1 text-xs font-semibold text-blue-800 dark:bg-blue-900/30 dark:text-blue-400",children:"Anda"})]}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:a.email}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-neutral-900 dark:text-neutral-100",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric"})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>E(a),children:e.jsx(K,{className:"h-4 w-4"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>F(a),disabled:a.id===g.user.id,className:"text-red-600 hover:bg-red-50 hover:text-red-700 disabled:opacity-50 dark:text-red-400 dark:hover:bg-red-900/20",children:e.jsx(L,{className:"h-4 w-4"})})]})})]},a.id))})]})}),t.last_page>1&&e.jsx("div",{className:"border-t border-sidebar-border/70 px-6 py-4 dark:border-sidebar-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-neutral-500",children:["Menampilkan"," ",(t.current_page-1)*t.per_page+1," ","-"," ",Math.min(t.current_page*t.per_page,t.total)," ","dari ",t.total," anggota"]}),e.jsx("div",{className:"flex space-x-2",children:Array.from({length:t.last_page},(a,P)=>P+1).map(a=>e.jsx("a",{href:m.index({query:{page:a}}).url,children:e.jsx(n,{variant:a===t.current_page?"default":"outline",size:"sm",children:a})},a))})]})})]})]}),e.jsx(u,{open:y,onOpenChange:p,children:e.jsxs(j,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Tambah Anggota"}),e.jsx(w,{children:"Tambahkan anggota baru ke sistem"})]}),e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"name",children:"Nama"}),e.jsx(i,{id:"name",value:r.data.name,onChange:a=>r.setData("name",a.target.value)}),r.errors.name&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",value:r.data.email,onChange:a=>r.setData("email",a.target.value)}),r.errors.email&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"password",children:"Password"}),e.jsx(i,{id:"password",type:"password",value:r.data.password,onChange:a=>r.setData("password",a.target.value)}),r.errors.password&&e.jsx("p",{className:"text-sm text-red-600",children:r.errors.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"password_confirmation",children:"Konfirmasi Password"}),e.jsx(i,{id:"password_confirmation",type:"password",value:r.data.password_confirmation,onChange:a=>r.setData("password_confirmation",a.target.value)})]})]}),e.jsxs(v,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>p(!1),children:"Batal"}),e.jsx(n,{type:"submit",disabled:r.processing,children:r.processing?"Menyimpan...":"Simpan"})]})]})]})}),e.jsx(u,{open:D,onOpenChange:x,children:e.jsxs(j,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Edit Anggota"}),e.jsx(w,{children:"Perbarui data anggota. Kosongkan password jika tidak ingin mengubahnya."})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"edit-name",children:"Nama"}),e.jsx(i,{id:"edit-name",value:s.data.name,onChange:a=>s.setData("name",a.target.value)}),s.errors.name&&e.jsx("p",{className:"text-sm text-red-600",children:s.errors.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"edit-email",children:"Email"}),e.jsx(i,{id:"edit-email",type:"email",value:s.data.email,onChange:a=>s.setData("email",a.target.value)}),s.errors.email&&e.jsx("p",{className:"text-sm text-red-600",children:s.errors.email})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"edit-password",children:"Password Baru (opsional)"}),e.jsx(i,{id:"edit-password",type:"password",value:s.data.password,onChange:a=>s.setData("password",a.target.value),placeholder:"Kosongkan jika tidak ingin mengubah"}),s.errors.password&&e.jsx("p",{className:"text-sm text-red-600",children:s.errors.password})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(d,{htmlFor:"edit-password_confirmation",children:"Konfirmasi Password Baru"}),e.jsx(i,{id:"edit-password_confirmation",type:"password",value:s.data.password_confirmation,onChange:a=>s.setData("password_confirmation",a.target.value)})]})]}),e.jsxs(v,{children:[e.jsx(n,{type:"button",variant:"outline",onClick:()=>x(!1),children:"Batal"}),e.jsx(n,{type:"submit",disabled:s.processing,children:s.processing?"Menyimpan...":"Simpan"})]})]})]})}),e.jsx(u,{open:C,onOpenChange:c,children:e.jsxs(j,{children:[e.jsxs(b,{children:[e.jsx(f,{children:"Hapus Anggota"}),e.jsxs(w,{children:["Apakah Anda yakin ingin menghapus anggota"," ",e.jsx("span",{className:"font-semibold",children:o?.name}),"? Tindakan ini tidak dapat dibatalkan."]})]}),e.jsxs(v,{children:[e.jsx(n,{variant:"outline",onClick:()=>c(!1),children:"Batal"}),e.jsx(n,{variant:"destructive",onClick:O,disabled:s.processing,children:s.processing?"Menghapus...":"Hapus"})]})]})})]})}export{ee as default};
